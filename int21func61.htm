<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<head>
<title>INT 21h function 61h</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div>INT 21h function 61h (path parse) was introduced in DOS 3.0 but dropped in DOS 3.1 and later. It seemed to be somewhat analogous to the FCB parse filename function (INT 21h function 29h) but it also handled subdirectories. This function did not support Universal Naming Convention (UNC) filenames which were supported by the DOS network redirector (REDIR.EXE) and is the likely reason it was dropped in DOS 3.1.</div>
<pre>
DOS 3.0 INT 21h function 61h (path parse)
Entry: DS:SI-&gt;filespec to parse
       ES:DI-&gt;output buffer
Exit:  AX=parse flags
          0001=invalid filespec
          0002=wildcard(s) present
          0004=path present
          0008=invalid drive
          2000=valid filespec
          4000=separators skipped
          8000=switch present (switch char is first)
       SI=offset to next unparsed character
</pre>
<div><a href="FN61.ZIP">Program to demonstrate function 61h</a> - source and binary (2.5KB)
</div>
<pre>
Actual INT 21h function 61h code from PC DOS 3.0:

078C:1ACA 32E4		XOR	AH,AH
078C:1ACC 33DB		XOR	BX,BX
078C:1ACE FC		CLD
078C:1ACF AC		LODSB
078C:1AD0 E81701	CALL	1BEA
078C:1AD3 742F		JZ	1B04
078C:1AD5 E81B01	CALL	1BF3
078C:1AD8 7430		JZ	1B0A
078C:1ADA E82C01	CALL	1C09
078C:1ADD 7437		JZ	1B16
078C:1ADF E86601	CALL	1C48
078C:1AE2 7432		JZ	1B16
078C:1AE4 E8A101	CALL	1C88
078C:1AE7 742D		JZ	1B16
078C:1AE9 E87901	CALL	1C65
078C:1AEC 7404		JZ	1AF2
078C:1AEE AA		STOSB
078C:1AEF E9E900	JMP	1BDB
078C:1AF2 81CB0020	OR	BX,2000
078C:1AF6 81CB0100	OR	BX,0001
078C:1AFA E8F600	CALL	1BF3
078C:1AFD 7501		JNZ	1B00
078C:1AFF 4F		DEC	DI
078C:1B00 4E		DEC	SI
078C:1B01 E9BE00	JMP	1BC2
078C:1B04 BB0080	MOV	BX,8000
078C:1B07 E9B800	JMP	1BC2
078C:1B0A BB0040	MOV	BX,4000
078C:1B0D AC		LODSB
078C:1B0E E8E200	CALL	1BF3
078C:1B11 74FA		JZ	1B0D
078C:1B13 E9C400	JMP	1BDA
078C:1B16 81CB0020	OR	BX,2000
078C:1B1A B90800	MOV	CX,0008
078C:1B1D BA0800	MOV	DX,0008
078C:1B20 E83201	CALL	1C55
078C:1B23 7505		JNZ	1B2A
078C:1B25 F6D4		NOT	AH
078C:1B27 EB41		JMP	1B6A
078C:1B29 90		NOP
078C:1B2A 3C2E		CMP	AL,2E
078C:1B2C 7505		JNZ	1B33
078C:1B2E 4E		DEC	SI
078C:1B2F 4F		DEC	DI
078C:1B30 EB38		JMP	1B6A
078C:1B32 90		NOP
078C:1B33 3C41		CMP	AL,41
078C:1B35 7D03		JGE	1B3A
078C:1B37 EB41		JMP	1B7A
078C:1B39 90		NOP
078C:1B3A 803C3A	CMP	BYTE PTR [SI],3A
078C:1B3D 753B		JNZ	1B7A
078C:1B3F F6D4		NOT	AH
078C:1B41 3C5A		CMP	AL,5A
078C:1B43 7E02		JLE	1B47
078C:1B45 2C20		SUB	AL,20
078C:1B47 2C40		SUB	AL,40
078C:1B49 E80E46	CALL	615A
078C:1B4C AC		LODSB
078C:1B4D AA		STOSB
078C:1B4E 7203		JB	1B53
078C:1B50 EB05		JMP	1B57
078C:1B52 90		NOP
078C:1B53 81CB0800	OR	BX,0008
078C:1B57 49		DEC	CX
078C:1B58 AC		LODSB
078C:1B59 E8EC00	CALL	1C48
078C:1B5C 740C		JZ	1B6A
078C:1B5E 4E		DEC	SI
078C:1B5F 8A44FE	MOV	AL,[SI-02]
078C:1B62 E8F000	CALL	1C55
078C:1B65 7503		JNZ	1B6A
078C:1B67 46		INC	SI
078C:1B68 EB88		JMP	1AF2
078C:1B6A E82901	CALL	1C96
078C:1B6D 746C		JZ	1BDB
078C:1B6F 7281		JB	1AF2
078C:1B71 B90800	MOV	CX,0008
078C:1B74 BA0800	MOV	DX,0008
078C:1B77 EB02		JMP	1B7B
078C:1B79 90		NOP
078C:1B7A 49		DEC	CX
078C:1B7B AC		LODSB
078C:1B7C E88A00	CALL	1C09
078C:1B7F 7505		JNZ	1B86
078C:1B81 32E4		XOR	AH,AH
078C:1B83 E2F6		LOOP	1B7B
078C:1B85 AC		LODSB
078C:1B86 80FC00	CMP	AH,00
078C:1B89 7507		JNZ	1B92
078C:1B8B 3BCA		CMP	CX,DX
078C:1B8D 7503		JNZ	1B92
078C:1B8F E960FF	JMP	1AF2
078C:1B92 E8F300	CALL	1C88
078C:1B95 7403		JZ	1B9A
078C:1B97 EB17		JMP	1BB0
078C:1B99 90		NOP
078C:1B9A B90300	MOV	CX,0003
078C:1B9D BA0300	MOV	DX,0003
078C:1BA0 AC		LODSB
078C:1BA1 E86500	CALL	1C09
078C:1BA4 7503		JNZ	1BA9
078C:1BA6 E2F8		LOOP	1BA0
078C:1BA8 AC		LODSB
078C:1BA9 3BCA		CMP	CX,DX
078C:1BAB 7503		JNZ	1BB0
078C:1BAD E942FF	JMP	1AF2
078C:1BB0 E89500	CALL	1C48
078C:1BB3 74AA		JZ	1B5F
078C:1BB5 E83B00	CALL	1BF3
078C:1BB8 741F		JZ	1BD9
078C:1BBA E8D100	CALL	1C8E
078C:1BBD 741C		JZ	1BDB
078C:1BBF E930FF	JMP	1AF2
078C:1BC2 AC		LODSB
078C:1BC3 E82D00	CALL	1BF3
078C:1BC6 7411		JZ	1BD9
078C:1BC8 E8C300	CALL	1C8E
078C:1BCB 740E		JZ	1BDB
078C:1BCD E89500	CALL	1C65
078C:1BD0 7504		JNZ	1BD6
078C:1BD2 81CB0100	OR	BX,0001
078C:1BD6 AA		STOSB
078C:1BD7 EBE9		JMP	1BC2
078C:1BD9 4F		DEC	DI
078C:1BDA 4E		DEC	SI
078C:1BDB 32C0		XOR	AL,AL
078C:1BDD AA		STOSB
078C:1BDE 56		PUSH	SI
078C:1BDF E8BAF9	CALL	159C
078C:1BE2 891C		MOV	[SI],BX
078C:1BE4 8F4408	POP	WORD PTR [SI+08]
078C:1BE7 E958FA	JMP	1642

078C:1BEA 363A062801	CMP	AL,SS:[0128]
078C:1BEF 7501		JNZ	1BF2
078C:1BF1 AA		STOSB
078C:1BF2 C3		RET

078C:1BF3 51		PUSH	CX
078C:1BF4 57		PUSH	DI
078C:1BF5 06		PUSH	ES
078C:1BF6 8CC9		MOV	CX,CS
078C:1BF8 8EC1		MOV	ES,CX
078C:1BFA B90800	MOV	CX,0008
078C:1BFD BFE012	MOV	DI,12E0
078C:1C00 F2AE		REPNE	SCASB
078C:1C02 07		POP	ES
078C:1C03 5F		POP	DI
078C:1C04 7501		JNZ	1C07
078C:1C06 AA		STOSB
078C:1C07 59		POP	CX
078C:1C08 C3		RET

078C:1C09 3C21		CMP	AL,21
078C:1C0B 7437		JZ	1C44
078C:1C0D 3C23		CMP	AL,23
078C:1C0F 7C36		JL	1C47
078C:1C11 3C2A		CMP	AL,2A
078C:1C13 742B		JZ	1C40
078C:1C15 7C2D		JL	1C44
078C:1C17 3C2D		CMP	AL,2D
078C:1C19 7429		JZ	1C44
078C:1C1B 3C30		CMP	AL,30
078C:1C1D 7C28		JL	1C47
078C:1C1F 3C39		CMP	AL,39
078C:1C21 7E21		JLE	1C44
078C:1C23 3C3F		CMP	AL,3F
078C:1C25 7419		JZ	1C40
078C:1C27 7C1E		JL	1C47
078C:1C29 3C5A		CMP	AL,5A
078C:1C2B 7E17		JLE	1C44
078C:1C2D 3C5E		CMP	AL,5E
078C:1C2F 7C16		JL	1C47
078C:1C31 3C7B		CMP	AL,7B
078C:1C33 7E0F		JLE	1C44
078C:1C35 3C7D		CMP	AL,7D
078C:1C37 740B		JZ	1C44
078C:1C39 3C7E		CMP	AL,7E
078C:1C3B 7407		JZ	1C44
078C:1C3D EB08		JMP	1C47
078C:1C3F 90		NOP
078C:1C40 81CB0200	OR	BX,0002
078C:1C44 AA		STOSB
078C:1C45 3AC0		CMP	AL,AL
078C:1C47 C3		RET

078C:1C48 E80A00	CALL	1C55
078C:1C4B 7507		JNZ	1C54
078C:1C4D AA		STOSB
078C:1C4E 81CB0400	OR	BX,0004
078C:1C52 3AC0		CMP	AL,AL
078C:1C54 C3		RET

078C:1C55 36803E28012F	CMP	BYTE PTR SS:[0128],2F
078C:1C5B 7405		JZ	1C62
078C:1C5D 3C2F		CMP	AL,2F
078C:1C5F 7501		JNZ	1C62
078C:1C61 C3		RET
078C:1C62 3C5C		CMP	AL,5C
078C:1C64 C3		RET

078C:1C65 3C01		CMP	AL,01
078C:1C67 7C1E		JL	1C87
078C:1C69 3C08		CMP	AL,08
078C:1C6B 7E18		JLE	1C85
078C:1C6D 3C0B		CMP	AL,0B
078C:1C6F 7C16		JL	1C87
078C:1C71 3C0D		CMP	AL,0D
078C:1C73 7503		JNZ	1C78
078C:1C75 3C00		CMP	AL,00
078C:1C77 C3		RET
078C:1C78 3C1F		CMP	AL,1F
078C:1C7A 7E09		JLE	1C85
078C:1C7C 3C5B		CMP	AL,5B
078C:1C7E 7405		JZ	1C85
078C:1C80 3C5D		CMP	AL,5D
078C:1C82 7401		JZ	1C85
078C:1C84 C3		RET
078C:1C85 3AC0		CMP	AL,AL
078C:1C87 C3		RET

078C:1C88 3C2E		CMP	AL,2E
078C:1C8A 7501		JNZ	1C8D
078C:1C8C AA		STOSB
078C:1C8D C3		RET

078C:1C8E 3C00		CMP	AL,00
078C:1C90 7503		JNZ	1C95
078C:1C92 4E		DEC	SI
078C:1C93 3AC0		CMP	AL,AL
078C:1C95 C3		RET

078C:1C96 803C2E	CMP	BYTE PTR [SI],2E
078C:1C99 7520		JNZ	1CBB
078C:1C9B AC		LODSB
078C:1C9C AA		STOSB
078C:1C9D 803C2E	CMP	BYTE PTR [SI],2E
078C:1CA0 7502		JNZ	1CA4
078C:1CA2 AC		LODSB
078C:1CA3 AA		STOSB
078C:1CA4 AC		LODSB
078C:1CA5 E8A0FF	CALL	1C48
078C:1CA8 7411		JZ	1CBB
078C:1CAA E846FF	CALL	1BF3
078C:1CAD 7407		JZ	1CB6
078C:1CAF E8DCFF	CALL	1C8E
078C:1CB2 7404		JZ	1CB8
078C:1CB4 F9		STC
078C:1CB5 C3		RET
078C:1CB6 4E		DEC	SI
078C:1CB7 4F		DEC	DI
078C:1CB8 3AC0		CMP	AL,AL
078C:1CBA C3		RET
078C:1CBB 80FC01	CMP	AH,01
078C:1CBE F8		CLC
078C:1CBF C3		RET

078C:12E0  09 0A 0D 20 2B 2C 3B 3D-			   ... +,;=
</pre>
</body>
